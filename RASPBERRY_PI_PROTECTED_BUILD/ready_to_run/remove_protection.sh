#!/bin/bash

# Снятие защиты от редактирования кода
# ТОЛЬКО ДЛЯ РАЗРАБОТЧИКА!

echo "==============================================="
echo "    СНЯТИЕ ЗАЩИТЫ ОТ РЕДАКТИРОВАНИЯ"
echo "==============================================="
echo ""

echo "ВНИМАНИЕ: Этот скрипт предназначен только для разработчика!"
echo "Снятие защиты позволит редактировать исходный код."
echo ""

read -p "Вы уверены, что хотите снять защиту? (yes/no): " confirm

if [ "$confirm" != "yes" ]; then
    echo "Операция отменена."
    exit 0
fi

echo ""
echo "Снятие защиты от редактирования..."

# Восстановление прав на редактирование для Python файлов
chmod -R 644 *.py
echo "✓ Python файлы доступны для редактирования"

# Восстановление прав на редактирование для шаблонов
chmod -R 644 templates/
echo "✓ HTML шаблоны доступны для редактирования"

# Восстановление прав на редактирование для статических файлов
chmod -R 644 static/
echo "✓ CSS и JavaScript файлы доступны для редактирования"

# Удаление файла блокировки
if [ -f ".PROTECTED" ]; then
    rm .PROTECTED
    echo "✓ Файл блокировки удален"
fi

# Удаление информации о защите
if [ -f "PROTECTION_INFO.txt" ]; then
    rm PROTECTION_INFO.txt
    echo "✓ Информация о защите удалена"
fi

echo ""
echo "==============================================="
echo "     ЗАЩИТА СНЯТА УСПЕШНО!"
echo "==============================================="
echo ""
echo "Теперь вы можете редактировать исходный код."
echo "Для повторной установки защиты используйте:"
echo "./set_protection.sh"
echo ""
